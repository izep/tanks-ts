<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MTN Viewer</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background-color: #1a1a1a;
      color: #ddd;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }

    header {
      background-color: #2c2c2c;
      padding: 1rem;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    h1 {
      margin: 0;
      font-size: 1.2rem;
    }

    #container {
      display: flex;
      flex: 1;
      overflow: hidden;
    }

    #sidebar {
      width: 280px;
      background-color: #222;
      border-right: 1px solid #444;
      display: flex;
      flex-direction: column;
    }

    #file-list {
      list-style: none;
      padding: 0;
      margin: 0;
      flex: 1;
      overflow-y: auto;
    }

    .file-item {
      padding: 10px 15px;
      cursor: pointer;
      border-bottom: 1px solid #333;
      transition: background-color 0.2s;
    }

    .file-item:hover {
      background-color: #333;
    }

    .file-item.selected {
      background-color: #0066cc;
      color: white;
    }

    #inspector-panel {
      padding: 15px;
      background: #111;
      border-top: 1px solid #444;
      font-size: 14px;
      height: 200px;
      overflow-y: auto;
    }

    #main {
      flex: 1;
      display: flex;
      flex-direction: column;
      background-color: #000;
      position: relative;
    }

    .canvas-container {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: auto;
    }

    canvas {
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
      background-color: transparent;
      image-rendering: pixelated;
      /* Crucial for pixel art */
    }
  </style>
</head>

<body>
  <header>
    <h1>MTN Viewer - Debug Mode</h1>
  </header>
  <div id="container">
    <nav id="sidebar">
      <div style="padding:10px; font-weight:bold; border-bottom:1px solid #444;">Files</div>
      <ul id="file-list">
        <li>Loading manifest...</li>
      </ul>
      <div id="inspector-panel">
        <h3 style="margin-top:0; font-size:16px;">INSPECTOR</h3>
        <div id="hover-info" style="margin-bottom:8px; color:#4fc3f7;">Hover over terrain...</div>
        <div id="byte-display"
          style="font-family: monospace; word-break: break-all; opacity: 0.8; font-size: 12px; color: #aaa; margin-bottom:10px;">
        </div>

        <div id="feedback-section" style="border-top:1px solid #444; padding-top:10px;">
          <h3 style="margin:0 0 5px 0; font-size:16px;">FEEDBACK</h3>
          <div id="selection-info" style="font-size:12px; color:#aaa; margin-bottom:5px;">Select an area...</div>
          <textarea id="feedback-desc" placeholder="Describe the problem..."
            style="width:100%; height:60px; background:#333; color:#fff; border:1px solid #555; font-size:12px;"></textarea>
          <div style="display:flex; gap:5px; margin-top:5px;">
            <button id="btn-add-feedback"
              style="flex:1; background:#444; color:#fff; border:none; padding:5px; cursor:pointer;">Add Note</button>
            <button id="btn-mark-good"
              style="flex:1; background:#008800; color:#fff; border:none; padding:5px; cursor:pointer;">Mark File
              OK</button>
          </div>
          <hr style="border:0; border-top:1px solid #444; margin:10px 0;">
          <button id="btn-copy-feedback"
            style="width:100%; background:#0066cc; color:#fff; border:none; padding:8px; cursor:pointer;">Copy Report
            for AI</button>
        </div>
      </div>
    </nav>
    <main id="main">
      <div id="controls-panel"
        style="background: #2c2c2c; padding: 10px; border-bottom: 1px solid #444; display: flex; gap: 10px; align-items: center;">
        <label>Mode:
          <select id="parse-mode-select" style="background:#444; color:#fff; border:1px solid #555;">
            <option value="term">Terminator</option>
            <option value="height1">1-Byte Height</option>
            <option value="height2">2-Byte Height</option>
          </select>
        </label>
        <label>Term: 0x<input type="text" id="terminator-input" value="00"
            style="width: 30px; background:#444; color:#fff; border:1px solid #555; text-transform:uppercase;"></label>
        <label>Start: <input type="number" id="offset-input" value="0"
            style="width: 60px; background:#444; color:#fff; border:1px solid #555;"></label>
        <button id="btn-reload"
          style="background:#444; color:white; border:none; padding:5px 15px; cursor:pointer;">Apply</button>

        <div style="width:1px; height:20px; background:#444; margin:0 5px;"></div>

        <button id="btn-zoom-out"
          style="background:#444; color:white; border:none; padding:5px 10px; cursor:pointer;">-</button>
        <span id="zoom-level">100%</span>
        <button id="btn-zoom-in"
          style="background:#444; color:white; border:none; padding:5px 10px; cursor:pointer;">+</button>

        <div id="status" style="margin-left: auto; font-family:monospace; color:#88ff88;">Ready</div>
      </div>
      <div class="canvas-container">
        <canvas id="mtn-canvas"></canvas>
      </div>
    </main>
  </div>
  <script type="module" src="./src/viewer.ts"></script>
</body>


</html>